\section{Избавление от требования кусочной монотонности $a$}

Получим теперь результат, ослабив предположение о кусочной монотонности $a$.
Предположим, найдется некоторое число $r$ на интервале $(-1, 0)$ такое,
что при $x \in [-1, r]$ функция $a$ возрастает и при этом нигде более не
опускается ниже уровня $a(r)$. То есть
$\min\{a(x): r \le x \le -r\} = a(r)$. В частности, функция $a$ может
принимать нулевые значения только в точках $-1$ и $1$.
Пусть $l \in (-1, r)$. Определим тогда функцию $b_\theta$ ($0 \le \theta < 1$)
следующим образом: на краях
($[-1,l]$, $[-l, 1]$) положим ее равной функции $a$, а в центре
сплющим в $\theta$ раз, сохранив непрерывность. То есть $b_\theta(x) = a(x)$
при $\abs{x} \ge \abs{l}$ и $b_\theta(x) = a(l) + \theta (a(x) - a(l))$ при
$\abs{x} < \abs{l}$.
Покажем, что получившаяся функция удовлетворяет неравенству
(\ref{almostConcaveSum}). Предположим, найдутся $s$ и $t$, для которых
неравенство не выполняется: $b_\theta(s) + b_\theta(t) < b_\theta(1 + s + t)$.
Тогда либо значение в $s$, либо значение в $t$ уменьшилось при переходе от
$a$ к $b_\theta$. Ясно, что
$\max\{ b_\theta(s), b_\theta(t)\} < b_\theta(1 + s + t)$, значит
$\max\{ a(s), a(t)\} < a(1 + s + t)$ и значение в $1 + s + t$ тоже уменьшилось.
Рассмотрим случай, когда $s$ и $t$ попали в $(l, -l)$. Для них выполняется
$a(s) + a(t) \ge a( 1 + s + t)$. Тогда $b_\theta(s) + b_\theta(t) =
2 a(l) + \theta ( a(s) - a(l) + a(t) - a(l) ) \ge
a(l) (1 - \theta) + ( a(l) + \theta ( a(1 + s + t) - a(l) ) ) >
b_\theta(1 + s + t)$. Пришли к противоречию.
Пусть теперь $s \in (l, -l)$, $\abs{t} \ge \abs{l}$. Тогда
$b_\theta(s) + b_\theta(t) =
a(l) + \theta ( a(s) - a(l) ) + a(t) =
a(l) + \theta ( a(s) + a(t) - a(l) ) + (1 - \theta) a(t) >
a(l) + \theta ( a(1 + s + t) - a(l) ) \ge b_\theta(1 + s + t)$.
Тем самым, функция $b_\theta$ удовлетворяет неравенству (\ref{almostConcaveSum}).

Теперь по функции $b_\theta$ построим кусочно-линейную функцию $c_\theta^k$,
совпадающую с $b_\theta$ в $k + 1$ точке, равномерно распределенной по $[-1, 1]$:
$c_\theta^k( \frac{2i - k}{k} ) = b_\theta( \frac{2i - k}{k} )$.
Покажем, что эта функция тоже удовлетворяет (\ref{almostConcaveSum}).
Пусть $s = \frac{2i - k}{k}$, $t = \frac{2j - k}{k}$. Тогда неравенство
выполняется, потому что оно выполняется для $b_\theta$. Пусть теперь для
некоторого $s = \frac{2i - k}{k}$ и некоторого
$t \in [\frac{2j - k}{k}, \frac{2(j + 1) - k}{k}]$
$c_\theta^k(s) + c_\theta^k(t) < c_\theta^k( 1 + s + t )$.
Рассмотрим линейную функцию
$h(t) = c_\theta^k( 1 + s + t ) - c_\theta^k(t) - c_\theta^k(s)$.
$h(\frac{2j - k}{k}) \le 0$, $h(t) > 0$, значит
$h(\frac{2(j + 1) - k}{k}) > 0$, что противоречит уже доказанному.
Аналогично, заведя линейную функцию от $s$ для произвольного фиксированного
$t$, получим неравенство для любых $s$ и $t$.

$c_\theta^k \rightrightarrows b_\theta$ при $k \to \infty$. Более того, если
$\theta \nearrow 1$ и $k \to \infty$, то $c_\theta^k \rightrightarrows a$.
В качестве $d_p$ ($p$~---~натуральное) возьмем следующую непрерывную функцию:
$d_p(x) = a(x)$ при $\abs{x} > \abs{l}$, $d_p(x) = b_{1 - \frac{1}{p}}(x)$ при
$\abs{l} \le \abs{x} < \abs{r}$ и $d_p(x) = c_{1 - \frac{1}{p}}^{k(p)}(x)$ при
всех остальных $x$. То есть на краях сначала функция совпадает с исходной,
затем со сплющенной. А в центре она кусочно-линейна. Выберем $k(p)$ таким образом,
чтобы $d_p$ монотонно стремились к $a$. А именно, $k(p)$ должны удовлетворять
следующим условиям: $k(p + 1) > k(p)$,
$c_{1 - \frac{1}{p + 1}}^{k(p + 1)}(x) > c_{1 - \frac{1}{p}}^{k(p)}(x)$ для
любого $x \in [r, -r]$. Первое условие гарантирует сходимость
последовательности, а второе --- ее монотонность. Поскольку
$c_\theta^k \rightrightarrows b_\theta$ и
$b_{1 - \frac{1}{p}}^k(r) < b_{1 - \frac{1}{p + 1}}^k(r)$, всегда можно
добиться выполнения второго условия.

Тем самым, мы построили монотонное приближение функции $a$. Теперь можно перейти
к пределу и получить

\begin{prop}
Если функция $a$ непрерывна, монотонна в окрестности точек $-1$ и $1$ и кроме
этой окрестности никогда не опускается ниже некоторого уровня, не
зависит от $u$ и удовлетворяет условию (\ref{almostConcave}), то для любой
$u \in \W(\Omega)$ $I(u^*) \le I(u)$.
\end{prop}

\rem Заметим, что если $a$ имеет нули и между ними имеет предполагаемый
утверждением вид, то неравенство тоже можно получить.
